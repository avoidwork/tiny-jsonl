{"version":3,"file":"tiny-jsonl.min.js","sources":["../src/constants.js","../src/valid.js","../src/jsonl.js"],"sourcesContent":["export const STRING_NEW_LINE = \"\\n\";\r\nexport const STRING_STRING = \"string\";\r\nexport const MSG_INVALID_INPUT = \"Argument must be an Array or Object\";\r\nexport const STRING_NULL = \"null\";\r\nexport const STRING_COMMA = \",\";\r\nexport const STRING_OBJECT = \"object\";\r\n","import {STRING_OBJECT} from \"./constants.js\";\r\n\r\nexport function valid (arg) {\r\n\treturn typeof arg === STRING_OBJECT && arg !== null;\r\n}\r\n","import {\r\n\tMSG_INVALID_INPUT,\r\n\tSTRING_COMMA,\r\n\tSTRING_NEW_LINE,\r\n\tSTRING_NULL,\r\n\tSTRING_STRING\r\n} from \"./constants.js\";\r\nimport {valid} from \"./valid.js\";\r\n\r\n/**\r\n * Converts a JSONL string to an Array of Objects\r\n * @param arg\r\n * @returns {any}\r\n */\r\nexport function parse (arg) {\r\n\tif (typeof arg !== STRING_STRING) {\r\n\t\tthrow new TypeError(MSG_INVALID_INPUT);\r\n\t}\r\n\r\n\tconst result = JSON.parse(`[${arg.trim().split(/(?<=})\\n/).join(STRING_COMMA)}]`);\r\n\r\n\treturn result.length > 1 ? result : result[0];\r\n}\r\n\r\n/**\r\n * Converts an Object or Array of Objects to JSONL string\r\n * @param arg\r\n * @returns {string}\r\n */\r\nexport function stringify (arg) {\r\n\tif (valid(arg) === false) {\r\n\t\tthrow new TypeError(MSG_INVALID_INPUT);\r\n\t}\r\n\r\n\tconst input = Array.isArray(arg) ? arg : [arg];\r\n\tconst rows = input.some(valid);\r\n\r\n\treturn rows ? input.map(i => i === null ? STRING_NULL : valid(i) ? JSON.stringify(i) : i).join(STRING_NEW_LINE) : JSON.stringify(input);\r\n}\r\n"],"names":["MSG_INVALID_INPUT","STRING_OBJECT","valid","arg","parse","TypeError","result","JSON","trim","split","join","length","stringify","input","Array","isArray","some","map","i"],"mappings":";;;;AAAO,MAEMA,EAAoB,sCAGpBC,EAAgB,SCHtB,SAASC,EAAOC,GACtB,cAAcA,IAAQF,GAAyB,OAARE,CACxC,CCUO,SAASC,EAAOD,GACtB,GFd4B,iBEcjBA,EACV,MAAM,IAAIE,UAAUL,GAGrB,MAAMM,EAASC,KAAKH,MAAM,IAAID,EAAIK,OAAOC,MAAM,YAAYC,KFfhC,SEiB3B,OAAOJ,EAAOK,OAAS,EAAIL,EAASA,EAAO,EAC5C,CAOO,SAASM,EAAWT,GAC1B,IAAmB,IAAfD,EAAMC,GACT,MAAM,IAAIE,UAAUL,GAGrB,MAAMa,EAAQC,MAAMC,QAAQZ,GAAOA,EAAM,CAACA,GAG1C,OAFaU,EAAMG,KAAKd,GAEVW,EAAMI,KAAIC,GAAW,OAANA,EFlCH,OEkC8BhB,EAAMgB,GAAKX,KAAKK,UAAUM,GAAKA,IAAGR,KFrC5D,MEqCoFH,KAAKK,UAAUC,EAClI,QAAAT,WAAAQ"}